# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python

class Recipe(recipe.Recipe):
    name = 'libsoup'
    version = '2.68.3'
    licenses = [License.LGPLv2Plus]
    stype = SourceType.TARBALL
    btype = BuildType.MESON
    url = 'gnome://'
    tarball_checksum = '534bb08e35b0ff3702f3adfde87d3441e27c12f9f5ec351f056fe04cba02bafb'
    meson_options = {'gnome': 'false', 'vapi': 'disabled', 'tls_check': 'false'}
    deps = ['libxml2', 'glib', 'glib-networking', 'libpsl']

    # sqlite ships with the system on macOS and iOS. Android also ships with
    # sqlite3, but it's not available from the NDK; only from Java.
    # We also build it on Linux to avoid the potential for bugs with
    # use_system_libs and to support cross-linux.
    platform_deps = {
        Platform.ANDROID: ['sqlite3'],
        Platform.WINDOWS: ['sqlite3'],
        Platform.LINUX: ['sqlite3'],
    }

    files_libs = ['libsoup-2.4']
    files_devel = ['include/libsoup-2.4', 'lib/pkgconfig/libsoup-2.4.pc']
    files_typelibs = ['Soup-2.4']
